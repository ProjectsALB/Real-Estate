<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Hero Image</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        .hero {
            position: relative;
            width: 100%;
            height: 100vh; 
            background: url('images/homeRealEstate.jpg') no-repeat center center/cover;
        }

        .hero::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .hero-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
        }

        .hero p {
            font-size: 1.2rem;
            margin-top: 10px;
        }

        .property-img {
            height: 230px;
            object-fit: cover;
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
        }

        .card {
            border-radius: 0.75rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .btn-buy-now {
            background-color: #043f7e;
            color: white;
            border-radius: 50px;
            padding: 12px 25px;
            transition: 0.3s;
        }

        .btn-buy-now:hover:not(:disabled) {
            background-color: #033468;
            box-shadow: 0 4px 10px rgba(0, 91, 187, 0.3);
        }

        .btn-buy-now:disabled {
            background-color: #aaa !important;
            cursor: not-allowed;
        }

        .purchased-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            z-index: 1;
        }

        .countdown-timer {
            font-size: 0.8rem;
            color: #dc3545;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .blog-img {
            height: 200px;
            object-fit: cover;
        }
        
        .btn-read-more {
            color: #043f7e;
            border: 1px solid #043f7e;
            border-radius: 50px;
            padding: 8px 20px;
            transition: all 0.3s;
        }
        
        .btn-read-more:hover {
            background-color: #043f7e;
            color: white;
        }
        
        .btn-view-all {
            background-color: #043f7e;
            color: white;
            border-radius: 50px;
            padding: 10px 30px;
            transition: all 0.3s;
        }
        
        .btn-view-all:hover {
            background-color: #033468;
            color: white;
        }
        
        .testimonial-img {
            width: 100px;
            height: 100px;
            object-fit: cover;
        }
        
        .custom-footer {
            background-color: #043f7e;
        }
        
        .custom-footer a {
            color: white;
            text-decoration: none;
        }
        
        .custom-footer a:hover {
            text-decoration: underline;
        }
        
        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            margin-right: 10px;
        }
        
        .social-links a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .custom-navbar {
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Navbar with working language dropdown -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top custom-navbar">
        <div class="container">
            <a class="navbar-brand" href="#" data-i18n="brand">HouseSpace</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#home" data-i18n="home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#property" data-i18n="property">Property</a></li>
                    <li class="nav-item"><a class="nav-link" href="#blog" data-i18n="blog">Blog</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-i18n="language">
                            Language
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item language-option" href="#" data-lang="en">English</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item language-option" href="#" data-lang="sq">Shqip (Albanian)</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="hero" id="home">
        <div class="hero-content">
            <h1 data-i18n="findYourDreamHome">Find Your Dream Home</h1>
            <p data-i18n="exploreProperties">Explore the best properties with HouseSpace</p>
        </div>
    </section>

    <section id="property" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="featuredProperties">Featured Properties</h2>
            <p class="text-center mb-5" data-i18n="discoverProperties">Discover a selection of our best properties for your next dream home.</p>
            <div class="row g-4" id="propertyList">
                <!-- Properties will be loaded here from JS -->
            </div>
        </div>

        <!-- Buy Now Modal -->
        <div class="modal fade" id="buyNowModal" tabindex="-1" aria-labelledby="buyNowModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="purchaseForm">
                        <input type="hidden" id="propertyId" name="propertyId" />
                        <div class="modal-header">
                            <h5 class="modal-title" id="buyNowModalLabel" data-i18n="completePurchase">Complete Your Purchase</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="firstName" class="form-label" data-i18n="firstName">First Name</label>
                                <input type="text" class="form-control" id="firstName" required />
                            </div>
                            <div class="mb-3">
                                <label for="lastName" class="form-label" data-i18n="lastName">Last Name</label>
                                <input type="text" class="form-control" id="lastName" required />
                            </div>
                            <div class="mb-3">
                                <label for="cardNumber" class="form-label" data-i18n="cardNumber">Card Number</label>
                                <input type="text" class="form-control" id="cardNumber" required />
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary" data-i18n="submitPayment">Submit Payment</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <section id="testimonials" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="testimonials">What Our Clients Say</h2>
            <p class="text-center mb-5" data-i18n="testimonialsDesc">We take pride in our satisfied clients. Here are some of the testimonials they shared with us.</p>
            <div class="row g-4">
                <!-- Testimonial 1 -->
                <div class="col-md-4">
                    <div class="card shadow-sm border-0 rounded">
                        <div class="card-body text-center">
                            <img src="images/client1.jpg" alt="Client 1" class="img-fluid rounded-circle mb-3 testimonial-img">
                            <h5 class="card-title" data-i18n="johnDoe">John Doe</h5>
                            <p class="card-text" data-i18n="testimonial1">"HouseSpace made the process of finding my dream home so easy. They really listened to my needs and helped me find the perfect place!"</p>
                        </div>
                    </div>
                </div>
        
                <!-- Testimonial 2 -->
                <div class="col-md-4">
                    <div class="card shadow-sm border-0 rounded">
                        <div class="card-body text-center">
                            <img src="images/client2.jpg" alt="Client 2" class="img-fluid rounded-circle mb-3 testimonial-img">
                            <h5 class="card-title" data-i18n="janeSmith">Jane Smith</h5>
                            <p class="card-text" data-i18n="testimonial2">"I had a fantastic experience working with HouseSpace. Their team was professional and supportive throughout the entire home-buying journey."</p>
                        </div>
                    </div>
                </div>
        
                <!-- Testimonial 3 -->
                <div class="col-md-4">
                    <div class="card shadow-sm border-0 rounded">
                        <div class="card-body text-center">
                            <img src="images/client3.jpg" alt="Client 3" class="img-fluid rounded-circle mb-3 testimonial-img">
                            <h5 class="card-title" data-i18n="emilyDavis">Emily Davis</h5>
                            <p class="card-text" data-i18n="testimonial3">"HouseSpace helped me find the perfect family home. Their expertise and attention to detail made all the difference!"</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="blog" class="py-5">
        <div class="container">
            <h2 class="text-center mb-4" data-i18n="latestBlog">Latest From Our Blog</h2>
            <p class="text-center mb-5" data-i18n="blogDesc">Get expert advice, market updates, and home inspiration.</p>
            
            <!-- Add New Blog Post Button -->
            <div class="text-center mb-4">
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addBlogModal">
                    <i class="fas fa-plus me-2"></i><span data-i18n="addBlogPost">Add New Blog Post</span>
                </button>
            </div>
            
            <div class="row g-4" id="blogPostsContainer">
                <!-- Blog posts will be loaded here dynamically -->
            </div>
            
            <div class="text-center mt-5">
                <a href="#" class="btn btn-view-all" data-i18n="viewAllPosts">View All Blog Posts</a>
            </div>
        </div>

        <!-- Add Blog Post Modal -->
        <div class="modal fade" id="addBlogModal" tabindex="-1" aria-labelledby="addBlogModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form id="blogPostForm">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addBlogModalLabel" data-i18n="addBlogPost">Add New Blog Post</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="mb-3">
                                <label for="blogTitle" class="form-label" data-i18n="title">Title</label>
                                <input type="text" class="form-control" id="blogTitle" required>
                            </div>
                            <div class="mb-3">
                                <label for="blogDescription" class="form-label" data-i18n="description">Description</label>
                                <textarea class="form-control" id="blogDescription" rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="blogImage" class="form-label" data-i18n="image">Image</label>
                                <input type="file" class="form-control" id="blogImage" accept="image/*" required>
                            </div>
                            <div class="mb-3">
                                <label for="blogLink" class="form-label" data-i18n="link">Link</label>
                                <input type="url" class="form-control" id="blogLink" required>
                            </div>
                            <div class="mb-3">
                                <label for="blogDate" class="form-label" data-i18n="postDate">Post Date</label>
                                <input type="date" class="form-control" id="blogDate" required>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">Cancel</button>
                            <button type="submit" class="btn btn-primary" data-i18n="addBlogPost">Add Blog Post</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="custom-footer text-white py-5">
        <div class="container">
            <div class="row gy-4">
                <!-- Logo & Copyright -->
                <div class="col-md-4 text-center text-md-start">
                    <h4 class="mb-3">🏠 <span data-i18n="brand">HouseSpace</span></h4>
                    <p class="mb-1">"<span data-i18n="footerSlogan">The right solution for every property.</span>"</p>
                    <p class="small">&copy; 2025 <span data-i18n="brand">HouseSpace</span>. <span data-i18n="allRights">All rights reserved.</span></p>
                </div>
        
                <!-- Quick Links -->
                <div class="col-md-4 text-center">
                    <h5 class="mb-3" data-i18n="quickLinks">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#home"><i class="fas fa-angle-right me-1"></i><span data-i18n="home">Home</span></a></li>
                        <li class="mb-2"><a href="#property"><i class="fas fa-angle-right me-1"></i><span data-i18n="property">Properties</span></a></li>
                        <li class="mb-2"><a href="#agent"><i class="fas fa-angle-right me-1"></i><span data-i18n="agent">Agent</span></a></li>
                        <li class="mb-2"><a href="#blog"><i class="fas fa-angle-right me-1"></i><span data-i18n="blog">Blog</span></a></li>
                    </ul>
                </div>
        
                <!-- Contact Info -->
                <div class="col-md-4 text-center text-md-start">
                    <h5 class="mb-3" data-i18n="contactUs">Contact Us</h5>
                    <ul class="list-unstyled small">
                        <li class="mb-2"><i class="fas fa-map-marker-alt"></i> <span data-i18n="address">Rruga "Blloku", Tirana</span></li>
                        <li class="mb-2"><i class="fas fa-envelope"></i> <a href="mailto:info@housespace.com">info@housespace.com</a></li>
                        <li class="mb-2"><i class="fas fa-phone"></i> <a href="tel:+1234567890">+123 456 7890</a></li>
                        <li class="mb-2"><i class="fas fa-clock"></i> <span data-i18n="workingHours">Mon - Fri, 09:00 - 18:00</span></li>
                        <li class="mb-2"><i class="fab fa-instagram"></i> <a href="#">@house.space</a></li>
                    </ul>
        
                    <div class="social-links d-flex justify-content-center justify-content-md-start mt-3">
                        <a href="#" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    
    <script>
        // Current language variable
        let currentLanguage = localStorage.getItem('selectedLanguage') || 'en';

        // Property data with translation keys
        const properties = [
            { 
                id: "1", 
                nameKey: "modernApartment", 
                price: 120000, 
                img: "images/home1.jpg", 
                descriptionKey: "modernApartmentDesc" 
            },
            { 
                id: "2", 
                nameKey: "luxuryVilla", 
                price: 250000, 
                img: "images/home2.jpg", 
                descriptionKey: "luxuryVillaDesc" 
            },
            { 
                id: "3", 
                nameKey: "countrysideHome", 
                price: 95000, 
                img: "images/home3.jpg", 
                descriptionKey: "countrysideHomeDesc" 
            },
            { 
                id: "4", 
                nameKey: "elegantHome", 
                price: 135000, 
                img: "images/home4.jpg", 
                descriptionKey: "elegantHomeDesc" 
            },
            { 
                id: "5", 
                nameKey: "urbanApartment", 
                price: 110000, 
                img: "images/home5.jpg", 
                descriptionKey: "urbanApartmentDesc" 
            },
            { 
                id: "6", 
                nameKey: "charmingTownhouse", 
                price: 105000, 
                img: "images/home6.jpg", 
                descriptionKey: "charmingTownhouseDesc" 
            },
        ];

        // Initialize purchased properties from localStorage
        let purchasedProperties = JSON.parse(localStorage.getItem('purchasedProperties')) || [];

        // Function to check and release expired purchases
        function checkExpiredPurchases() {
            const now = new Date().getTime();
            let updated = false;
            
            // Filter out purchases older than 3 minutes (180000 ms)
            const validPurchases = purchasedProperties.filter(purchase => {
                if (now - purchase.timestamp < 180000) {
                    return true;
                } else {
                    updated = true;
                    return false;
                }
            });

            if (updated) {
                purchasedProperties = validPurchases;
                localStorage.setItem('purchasedProperties', JSON.stringify(purchasedProperties));
                renderProperties();
            }
        }

        // Function to format remaining time
        function formatTimeRemaining(endTime) {
            const now = new Date().getTime();
            const distance = endTime - now;
            
            // Calculate minutes and seconds
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            return `${minutes}m ${seconds}s`;
        }

        // Render properties with countdown
        function renderProperties() {
            const container = document.getElementById("propertyList");
            if (!container) return;
            
            container.innerHTML = properties.map(p => {
                const purchaseInfo = purchasedProperties.find(purchase => purchase.propertyId === p.id);
                const isPurchased = !!purchaseInfo;
                const endTime = purchaseInfo ? purchaseInfo.timestamp + 180000 : 0;
                const timeRemaining = endTime - new Date().getTime();

                return `
                    <div class="col-md-4">
                        <div class="card h-100 shadow-sm border-0 position-relative">
                            ${isPurchased ? '<span class="purchased-badge" data-i18n="sold">Sold</span>' : ''}
                            <img src="${p.img}" class="card-img-top property-img" alt="${translations[currentLanguage][p.nameKey]}">
                            <div class="card-body text-center">
                                <h5 class="card-title">${translations[currentLanguage][p.nameKey]}</h5>
                                <p class="card-text">${translations[currentLanguage][p.descriptionKey]}</p>
                                <h5 class="card-title" data-i18n="price">Price: €${p.price.toLocaleString()}</h5>
                                <button class="btn btn-buy-now mt-2" 
                                    data-property-id="${p.id}" 
                                    ${isPurchased ? 'disabled' : ''}
                                    data-bs-toggle="modal" 
                                    data-bs-target="#buyNowModal">
                                    ${isPurchased ? translations[currentLanguage]['alreadyPurchased'] : translations[currentLanguage]['buyNow']}
                                </button>
                                ${isPurchased && timeRemaining > 0 ? `
                                    <div class="countdown-timer">
                                        ${translations[currentLanguage]['availableIn']}: <span id="countdown-${p.id}">${formatTimeRemaining(endTime)}</span>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            // Start countdown timers
            purchasedProperties.forEach(purchase => {
                const propertyId = purchase.propertyId;
                const endTime = purchase.timestamp + 180000;
                
                const countdownElement = document.getElementById(`countdown-${propertyId}`);
                if (countdownElement) {
                    const timer = setInterval(() => {
                        const now = new Date().getTime();
                        const distance = endTime - now;
                        
                        if (distance <= 0) {
                            clearInterval(timer);
                            checkExpiredPurchases();
                        } else {
                            countdownElement.textContent = formatTimeRemaining(endTime);
                        }
                    }, 1000);
                }
            });

            // Add event listeners to Buy Now buttons
            document.querySelectorAll('.btn-buy-now:not(:disabled)').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.getElementById('propertyId').value = this.getAttribute('data-property-id');
                });
            });
        }

        // Handle form submission
        document.getElementById("purchaseForm")?.addEventListener("submit", function(e) {
            e.preventDefault();
            
            const propertyId = document.getElementById("propertyId").value;
            const firstName = document.getElementById("firstName").value;
            const lastName = document.getElementById("lastName").value;
            const cardNumber = document.getElementById("cardNumber").value;

            // Remove any existing purchase for this property
            purchasedProperties = purchasedProperties.filter(p => p.propertyId !== propertyId);
            
            // Add new purchase with timestamp
            purchasedProperties.push({
                propertyId,
                timestamp: new Date().getTime()
            });
            
            localStorage.setItem('purchasedProperties', JSON.stringify(purchasedProperties));
            
            // In a real app, you would send this to your backend
            console.log(`Purchasing property ${propertyId} for ${firstName} ${lastName}`);
            
            // Close modal and refresh properties
            const modal = bootstrap.Modal.getInstance(document.getElementById("buyNowModal"));
            modal?.hide();
            renderProperties();

            // Show success message
            alert(translations[currentLanguage]['purchaseSuccess']);
        });

        // Static blog posts (never expire)
        const staticBlogPosts = [
            {
                id: "static-1",
                titleKey: "blogTitle1",
                descriptionKey: "blogDesc1",
                image: "images/blog1.jpg",
                link: "https://retipster.com/blog/",
                date: "2025-01-01T00:00:00Z",
                isStatic: true
            },
            {
                id: "static-2",
                titleKey: "blogTitle2",
                descriptionKey: "blogDesc2",
                image: "images/blog2.jpg",
                link: "https://theclose.com/",
                date: "2025-01-02T00:00:00Z",
                isStatic: true
            },
            {
                id: "static-3",
                titleKey: "blogTitle3",
                descriptionKey: "blogDesc3",
                image: "images/blog3.jpg",
                link: "https://www.realtor.com/homemade/",
                date: "2025-01-03T00:00:00Z",
                isStatic: true
            }
        ];

        // User-added blog posts (expire after 2 days)
        let userBlogPosts = [];

        // Load user posts from localStorage if available
        if (localStorage.getItem('userBlogPosts')) {
            userBlogPosts = JSON.parse(localStorage.getItem('userBlogPosts'));
            checkExpiredBlogPosts(); // Remove any expired user posts on load
        }

        // Function to check and remove expired blog posts (only for user-added posts)
        function checkExpiredBlogPosts() {
            const now = new Date();
            const initialCount = userBlogPosts.length;
            
            userBlogPosts = userBlogPosts.filter(post => {
                return new Date(post.expiresAt) > now;
            });

            if (userBlogPosts.length !== initialCount) {
                localStorage.setItem('userBlogPosts', JSON.stringify(userBlogPosts));
            }
            
            return userBlogPosts;
        }

        // Function to render all blog posts
        function renderBlogPosts() {
            const container = document.getElementById('blogPostsContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Combine static and user posts
            const allPosts = [...staticBlogPosts, ...checkExpiredBlogPosts()];
            
            // Sort all posts by date (newest first)
            const sortedPosts = [...allPosts].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'col-md-4 mb-4';
                
                let expirationInfo = '';
                if (!post.isStatic) {
                    const timeLeft = new Date(post.expiresAt) - new Date();
                    const daysLeft = Math.ceil(timeLeft / (1000 * 60 * 60 * 24));
                    expirationInfo = `<small class="text-danger fw-bold d-block">${translations[currentLanguage]['expiresIn']}: ${daysLeft} ${translations[currentLanguage]['days']}${daysLeft !== 1 ? 's' : ''}</small>`;
                }
                
                const title = post.isStatic ? translations[currentLanguage][post.titleKey] : post.title;
                const description = post.isStatic ? translations[currentLanguage][post.descriptionKey] : post.description;
                
                postElement.innerHTML = `
                    <div class="card h-100 shadow-sm border-0">
                        <img src="${post.image}" class="card-img-top blog-img" alt="${title}">
                        <div class="card-body">
                            <h5 class="card-title">${title}</h5>
                            <p class="card-text text-muted">${description}</p>
                            <a href="${post.link}" target="_blank" class="btn btn-read-more">${translations[currentLanguage]['readMore']}</a>
                        </div>
                        <div class="card-footer bg-white border-0">
                            <small class="text-muted d-block">${translations[currentLanguage]['posted']}: ${formatDate(post.date)}</small>
                            ${expirationInfo}
                        </div>
                    </div>
                `;
                container.appendChild(postElement);
            });
        }

        // Function to format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'short', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Handle blog post form submission
        document.getElementById('blogPostForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('blogTitle').value;
            const description = document.getElementById('blogDescription').value;
            const link = document.getElementById('blogLink').value;
            const date = document.getElementById('blogDate').value || new Date().toISOString();
            const imageFile = document.getElementById('blogImage').files[0];
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newPost = {
                        id: Date.now().toString(),
                        title,
                        description,
                        image: e.target.result,
                        link,
                        date,
                        expiresAt: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString() // 2 days from now
                    };
                    
                    userBlogPosts.push(newPost);
                    localStorage.setItem('userBlogPosts', JSON.stringify(userBlogPosts));
                    
                    renderBlogPosts();
                    
                    // Close modal and reset form
                    const modal = bootstrap.Modal.getInstance(document.getElementById('addBlogModal'));
                    modal?.hide();
                    e.target.form.reset();
                };
                reader.readAsDataURL(imageFile);
            }
        });

        // Language translations
        const translations = {
            en: {
                "brand": "HouseSpace",
                "home": "Home",
                "property": "Property",
                "blog": "Blog",
                "language": "Language",
                "findYourDreamHome": "Find Your Dream Home",
                "exploreProperties": "Explore the best properties with HouseSpace",
                "featuredProperties": "Featured Properties",
                "discoverProperties": "Discover a selection of our best properties for your next dream home.",
                "completePurchase": "Complete Your Purchase",
                "firstName": "First Name",
                "lastName": "Last Name",
                "cardNumber": "Card Number",
                "submitPayment": "Submit Payment",
                "buyNow": "Buy Now",
                "alreadyPurchased": "Already Purchased",
                "availableIn": "Available in:",
                "sold": "Sold",
                "price": "Price:",
                "testimonials": "What Our Clients Say",
                "testimonialsDesc": "We take pride in our satisfied clients. Here are some of the testimonials they shared with us.",
                "latestBlog": "Latest From Our Blog",
                "blogDesc": "Get expert advice, market updates, and home inspiration.",
                "addBlogPost": "Add New Blog Post",
                "title": "Title",
                "description": "Description",
                "image": "Image",
                "link": "Link",
                "postDate": "Post Date",
                "cancel": "Cancel",
                "readMore": "Read More",
                "posted": "Posted",
                "expiresIn": "Expires in",
                "days": "day",
                "viewAllPosts": "View All Blog Posts",
                "footerSlogan": "The right solution for every property",
                "allRights": "All rights reserved",
                "quickLinks": "Quick Links",
                "contactUs": "Contact Us",
                "address": "Rruga \"Blloku\", Tirana",
                "workingHours": "Mon - Fri, 09:00 - 18:00",
                "agent": "Agent",
                "johnDoe": "John Doe",
                "janeSmith": "Jane Smith",
                "emilyDavis": "Emily Davis",
                "testimonial1": "\"HouseSpace made the process of finding my dream home so easy. They really listened to my needs and helped me find the perfect place!\"",
                "testimonial2": "\"I had a fantastic experience working with HouseSpace. Their team was professional and supportive throughout the entire home-buying journey.\"",
                "testimonial3": "\"HouseSpace helped me find the perfect family home. Their expertise and attention to detail made all the difference!\"",
                "modernApartment": "Modern apartment in the city center",
                "modernApartmentDesc": "Modern apartment in the city center with spacious living room and balcony.",
                "luxuryVilla": "Luxurious villa near the beach",
                "luxuryVillaDesc": "Luxurious villa near the beach with a garden and swimming pool.",
                "countrysideHome": "Cozy countryside home",
                "countrysideHomeDesc": "Cozy countryside home with 2 bedrooms and a private patio.",
                "elegantHome": "Elegant home with rooftop terrace",
                "elegantHomeDesc": "Elegant home with modern kitchen, 3 bedrooms and a rooftop terrace.",
                "urbanApartment": "Urban apartment in quiet neighborhood",
                "urbanApartmentDesc": "Urban apartment located in a quiet neighborhood, great for families.",
                "charmingTownhouse": "Charming townhouse with private parking",
                "charmingTownhouseDesc": "Charming townhouse with private parking and renovated interiors.",
                "blogTitle1": "First-Time Home Buyer's Complete Checklist",
                "blogDesc1": "Everything you need to know before making your first home purchase.",
                "blogTitle2": "How to Stage Your Home for a Quick Sale",
                "blogDesc2": "Professional tips to make your home more appealing to buyers.",
                "blogTitle3": "2025 Housing Market Predictions",
                "blogDesc3": "What experts are saying about this year's real estate trends.",
                "purchaseSuccess": "Thank you for your purchase! This property will be reserved for 3 minutes."
            },
            sq: {
                "brand": "HouseSpace",
                "home": "Kryefaqja",
                "property": "Prona",
                "blog": "Blog",
                "language": "Gjuha",
                "findYourDreamHome": "Gjeni Shtëpinë e Ëndrrave Tuaja",
                "exploreProperties": "Eksploroni pronat më të mira me HouseSpace",
                "featuredProperties": "Prona të Zgjedhura",
                "discoverProperties": "Zbuloni një përzgjedhje të pronave tona më të mira për shtëpinë tuaj të ëndrrave.",
                "completePurchase": "Përfundoni Blerjen",
                "firstName": "Emri",
                "lastName": "Mbiemri",
                "cardNumber": "Numri i Kartës",
                "submitPayment": "Dërgo Pagesën",
                "buyNow": "Bli Tani",
                "alreadyPurchased": "E Blerë",
                "availableIn": "E disponueshme për:",
                "sold": "E Shitur",
                "price": "Çmimi:",
                "testimonials": "Çfarë Thonë Klientët Tanë",
                "testimonialsDesc": "Ne krenohemi me klientët tanë të kënaqur. Ja disa nga dëshmitë që ndanë me ne.",
                "latestBlog": "Postimet e Fundit nga Blogu",
                "blogDesc": "Merrni këshilla ekspertësh, përditësime të tregut dhe frymëzim për shtëpi.",
                "addBlogPost": "Shto Postim të Ri",
                "title": "Titulli",
                "description": "Përshkrimi",
                "image": "Imazhi",
                "link": "Linku",
                "postDate": "Data e Postimit",
                "cancel": "Anulo",
                "readMore": "Lexo Më Shumë",
                "posted": "Postuar",
                "expiresIn": "Skadon për",
                "days": "ditë",
                "viewAllPosts": "Shiko Të Gjitha Postimet",
                "footerSlogan": "Zgjidhja e duhur për çdo pronë",
                "allRights": "Të gjitha të drejtat e rezervuara",
                "quickLinks": "Lidhje të Shpejta",
                "contactUs": "Na Kontaktoni",
                "address": "Rruga \"Blloku\", Tiranë",
                "workingHours": "E hënë - E premte, 09:00 - 18:00",
                "agent": "Agjenti",
                "johnDoe": "Gjon Paloka",
                "janeSmith": "Jana Smiti",
                "emilyDavis": "Emili Dejvis",
                "testimonial1": "\"HouseSpace e bëri procesin e gjetjes së shtëpisë sime të ëndrrave shumë të lehtë. Ata dëgjuan nevojat e mia dhe më ndihmuan të gjej vendin perfekt!\"",
                "testimonial2": "\"Pata një përvojë të shkëlqyer duke punuar me HouseSpace. Ekipi i tyre ishte profesional dhe mbështetës gjatë gjithë udhëtimit të blerjes së shtëpisë.\"",
                "testimonial3": "\"HouseSpace më ndihmoi të gjej shtëpinë perfekte për familjen. Ekspertiza e tyre dhe vëmendja ndaj detajeve bënë të gjithë ndryshimin!\"",
                "modernApartment": "Apartament modern në qendër të qytetit",
                "modernApartmentDesc": "Apartament modern në qendër të qytetit me dhomë të madhe të jetesës dhe ballkon.",
                "luxuryVilla": "Vilë luksoze pranë plazhit",
                "luxuryVillaDesc": "Vilë luksoze pranë plazhit me kopsht dhe pishinë.",
                "countrysideHome": "Shtëpi e rehatshme në fshat",
                "countrysideHomeDesc": "Shtëpi e rehatshme në fshat me 2 dhoma gjumi dhe oborr privat.",
                "elegantHome": "Shtëpi elegante me tarracë në çati",
                "elegantHomeDesc": "Shtëpi elegante me kuzhinë moderne, 3 dhoma gjumi dhe tarracë në çati.",
                "urbanApartment": "Apartament urban në lagje të qetë",
                "urbanApartmentDesc": "Apartament urban i vendosur në një lagje të qetë, i shkëlqyer për familjet.",
                "charmingTownhouse": "Shtëpi e bukur me parking privat",
                "charmingTownhouseDesc": "Shtëpi e bukur me parking privat dhe ambiente të rinovuara.",
                "blogTitle1": "Lista e Plotë për Blerësit e Parë të Shtëpisë",
                "blogDesc1": "Gjithçka që duhet të dini përpara se të bëni blerjen tuaj të parë të shtëpisë.",
                "blogTitle2": "Si të Përgatisni Shtëpinë Tuaj për Një Shitje të Shpejtë",
                "blogDesc2": "Këshilla profesionale për ta bërë shtëpinë tuaj më tërheqëse për blerësit.",
                "blogTitle3": "Parashikimet e Tregut të Pasurive të Paluajtshme për 2025",
                "blogDesc3": "Çfarë thonë ekspertët për trendet e këtij viti në pasuri të paluajtshme.",
                "purchaseSuccess": "Faleminderit për blerjen! Kjo pronë do të rezervohet për 3 minuta."
            }
        };

        // Function to change language
        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('selectedLanguage', lang);
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        // Handle input placeholders
                        element.placeholder = translations[lang][key];
                    } else {
                        // Handle all other elements
                        element.textContent = translations[lang][key];
                    }
                }
            });
            
            // Re-render dynamic content
            renderProperties();
            renderBlogPosts();
        }

        // Initialize the page
        document.addEventListener("DOMContentLoaded", function() {
            // Initialize language
            const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
            changeLanguage(savedLanguage);
            
            // Set up language switcher
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    e.preventDefault();
                    const lang = this.getAttribute('data-lang');
                    changeLanguage(lang);
                });
            });
            
            // Initialize property and blog functionality
            checkExpiredPurchases();
            renderProperties();
            setInterval(checkExpiredPurchases, 60000); // Check every minute
            
            renderBlogPosts();
            setInterval(() => {
                const beforeCount = userBlogPosts.length;
                checkExpiredBlogPosts();
                if (userBlogPosts.length !== beforeCount) {
                    renderBlogPosts();
                }
            }, 60 * 60 * 1000); // Every hour
        });
    </script>
</body>
</html>